# ğŸ“ƒ **å…³äºdoc-server**

åŸºäº  [ğŸ¦œï¸ğŸ”— LangChain](https://github.com/hwchase17/langchain) ä¸  DeepSeek R1 å¤§è¯­è¨€æ¨¡å‹çš„æœ¬åœ°çŸ¥è¯†åº“é—®ç­”ã€‚

æœ¬é¡¹ç›®æ˜¯æœ¬åœ°çŸ¥è¯†åº“é—®ç­”åº”ç”¨çš„ serve åç«¯ã€‚ç›®å‰å®ç°åŸºæœ¬çš„ RAG åŠŸèƒ½ã€‚
åç»­ä¼šç³»ç»Ÿå­¦ä¹  langchain ï¼Œé€æ­¥æ·»åŠ æ›´å¤šçš„åŠŸèƒ½ã€‚

## å¿«é€Ÿä¸Šæ‰‹

```shell
# æ‰“å¼€ ubuntu ç»ˆç«¯ï¼Œåˆ‡æ¢ r1 ç¯å¢ƒ
conda activate r1

# æ‰“å¼€ç›®å½•
cd Project

# æ‹‰å–é¡¹ç›®
$ git clone https://github.com/YuiGod/py-doc-qa-deepseek-server.git

# è¿›å»é¡¹ç›®
$ cd py-doc-qa-deepseek-server

# å®‰è£…é¡¹ç›®ç›¸å…³ä¾èµ–
pip install -r requirements.txt

# è¿›å…¥ app ç›®å½•
cd app

# å¯åŠ¨æœåŠ¡
python main.py
```

## é¡¹ç›®åŠŸèƒ½

1. æ–‡æ¡£ç®¡ç†APIï¼Œæ–‡æ¡£ä¸Šä¼ åˆ°æŒ‡å®šä½ç½®ï¼Œå¹¶åœ¨ SQLite è®°å½•ä¿¡æ¯ã€‚
2. èŠå¤©å¯¹è¯å†å²ç®¡ç†APIï¼Œç”¨ SQLite ä¿å­˜è®°å½•ã€‚
3. èŠå¤©é‡‡ç”¨æµå¼å“åº”ã€‚
4. å®ç°åŸºæœ¬çš„ RAG åŠŸèƒ½ã€‚

> åŸºæœ¬æ¡†æ¶å·²ç»æ­å»ºå®Œæˆã€‚åç»­ä¼šç³»ç»Ÿå­¦ä¹  LangGraph ï¼Œæ·»åŠ æ›´å¤šæ–°çš„åŠŸèƒ½ã€‚

## src ç›®å½•æ ‘

```
    app                             # ä¸»ç›®å½•
    â”œâ”€â”€ core                        # LangChan æ ¸å¿ƒä»£ç 
    â”‚   â”œâ”€â”€ base.py                 # LangChan å¸¸é‡é…ç½®
    â”‚   â”œâ”€â”€ langchain_retrieval.py  # æ„å»ºæ£€ç´¢è¿
    â”‚   â””â”€â”€ langchain_vector.py     # è¯»å–æ–‡æ¡£ï¼Œåˆ†å‰²æ–‡æ¡£ï¼Œå‘é‡åŒ–æ–‡æ¡£
    â”œâ”€â”€ crud                        # æ•°æ®åº“ crud æ“ä½œç›®å½•
    â”‚   â”œâ”€â”€ __init__.py
    â”‚   â”œâ”€â”€ base.py                 # æ•°æ®åº“é…ç½®
    â”‚   â”œâ”€â”€ chat_history_crud.py    # å¯¹è¯èŠå¤©å†å² crud
    â”‚   â”œâ”€â”€ chat_session_crud.py    # ä¼šè¯ç®¡ç† crud
    â”‚   â””â”€â”€ document_crud.py        # æ–‡æ¡£ç®¡ç† crud
    â”œâ”€â”€ models                      # æ•°æ®åº“æ¨¡å‹ï¼ŒåŸºæœ¬æ¨¡å‹ç›®å½•
    â”‚   â”œâ”€â”€ __init__.py
    â”‚   â”œâ”€â”€ chat_history_model.py   # èŠå¤©å†å²è®°å½•ç®¡ç†æ•°æ®åº“æ¨¡å‹
    â”‚   â”œâ”€â”€ chat_model.py           # èŠå¤©æ¨¡å‹ï¼ŒåŸºæœ¬æ¨¡å‹
    â”‚   â”œâ”€â”€ chat_session_model.py   # ä¼šè¯ç®¡ç†æ•°æ®åº“æ¨¡å‹
    â”‚   â””â”€â”€ document_model.py       # æ–‡æ¡£æŒ‚ä½ æ•°æ®åº“æ¨¡å‹
    â””â”€â”€ routers                     # api è·¯ç”±åˆ†ç±»
    â”‚   â”œâ”€â”€ __init__.py
    â”‚   â”œâ”€â”€ base.py                 # åŸºç¡€é…ç½®ï¼Œé…ç½®æˆåŠŸå’Œå¤±è´¥è¿”å›æ¨¡å‹
    â”‚   â”œâ”€â”€ chat_router.py          # èŠå¤© Api
    â”‚   â”œâ”€â”€ chat_session_router.py  # ä¼šè¯ç®¡ç† Api
    â”‚   â””â”€â”€ document_router.py      # æ–‡æ¡£ç®¡ç† Api
    â”œâ”€â”€ document_qa.db              # SQLiteæ•°æ®åº“
    â”œâ”€â”€ main.py                     # ä¸»ç¨‹åºå¯åŠ¨æœåŠ¡å…¥å£
```
